//Analysis Type - Regression 
#include <stdio.h>
#include <conio.h>
#include <math.h>
#include <stdlib.h>


double input_hidden_weights[67][7]=
{
 {-2.29291563056706e-001, 7.18791394747008e-002, 2.53343773860726e-001, 5.77185475032939e-002, -1.25899220347421e-001, 1.42964855156936e+000, -1.10044679564973e+000 },
 {-1.40744075660752e-001, 5.65841573773374e-002, -1.17321948046919e-002, 7.31103767462266e-002, 4.35976580610226e-001, 1.07759295548041e+000, -4.56666272914783e-001 },
 {-1.34264251081991e-001, 2.52683083480709e-001, -6.27488787534523e-001, 2.55486986277193e-001, -1.31755747075734e-001, 6.43088531013131e-001, -2.93799536676012e-001 },
 {-3.49600140624824e-001, -4.64240604239498e-001, 1.39593113536586e+000, -5.11383012379925e-001, -9.21515207617968e-001, 5.96411031735124e-001, -1.10436986593689e+000 },
 {3.17580743726852e-001, 3.41696071647548e-001, -1.11706613465913e+000, 3.74881294740308e-001, 4.48016529982718e-001, -1.39236421622227e+000, 7.24890629736151e-001 },
 {-1.08624056617521e-001, 3.24564092131663e-001, -1.42049356550934e+000, 3.47690825258306e-001, -1.22602755146910e-001, -5.72661115938339e-001, -1.21574752130424e-001 },
 {2.28314504596148e-001, -2.04758873690112e-001, 5.73022683567133e-001, -1.87116586233217e-001, -1.04629990670485e-001, -9.44177877480013e-001, 5.07255845909965e-002 },
 {1.09928953290532e+000, -2.79960294262291e-001, 2.98658923737076e+000, -3.48228632589343e-001, 1.19047324690305e+000, -3.05219864300140e+000, -3.03605242600021e+000 },
 {1.59616699160597e-001, -1.86487578270945e-001, -3.36472039794088e-001, -1.54125843225793e-001, -1.73269157066114e-001, -7.71232453693479e-001, -4.84762006080045e-002 },
 {4.42302452626075e-002, -1.02578100696311e+000, 2.48873402371635e+000, -1.07793249288838e+000, -9.72455422260981e-001, -1.52312100471066e-001, 1.34162937407613e+000 },
 {3.14992173951250e-001, -1.51197620342835e+000, 1.91017724528019e+000, -1.47914862117581e+000, -5.24402975627757e-002, -1.47498726512174e+000, -1.31550848028377e+000 },
 {-3.17809232510531e-001, 5.07026144330472e-001, -1.29510038220349e+000, 5.51477479728674e-001, -8.14392532216146e-002, -1.22825434750433e-001, 5.94849363969807e-001 },
 {2.33210366231070e-001, -4.43974864442491e-001, 7.69022420094225e-001, -4.34438676093688e-001, 8.67784271610662e-002, -1.10930228636739e+000, -2.71684470194626e-002 },
 {-4.17451451437986e-001, -6.58438818999343e-001, 1.12104163687675e+000, -6.11124314619239e-001, -6.56392222933134e-001, 1.12084950412771e+000, -7.76133723980400e-001 },
 {9.73950739734994e-002, 7.21559617947697e-001, -2.05045475524191e+000, 7.22812702491083e-001, 3.82272780248780e-001, -1.16535865542767e+000, 4.56105350100858e-001 },
 {-4.49045868325515e-002, 8.71818577539546e-001, -2.65427309582882e+000, 9.18390315725653e-001, -4.11703637847083e-002, -1.62187444165066e+000, 8.74275444971776e-001 },
 {-6.50371700461216e-001, -4.87015512563966e-001, 1.34851330397654e+000, -5.27529817684608e-001, -1.40384090119770e-001, 2.37089594419786e+000, -2.93897012034989e-001 },
 {-4.77229546989096e-001, -2.80924930875269e-001, 6.09671005673452e-001, -2.92002764495508e-001, -6.29295856165610e-001, 9.59370808199123e-001, -3.68781295244902e-001 },
 {-1.63955806286902e-001, 2.02764947297823e-001, -6.97467731171259e-001, 1.48732552270862e-001, -3.69036170275265e-001, 5.70704812959396e-002, 1.78464191060009e-001 },
 {-1.14936007222854e-001, -4.44771148307259e-002, -1.55535945357444e-001, -1.86109650640676e-002, -3.49944089436661e-001, 1.85472643814975e-001, 8.16832948003424e-002 },
 {1.54945780782444e-002, -1.68494310702889e-001, -4.05314749706956e-001, -2.03217053291761e-001, -4.48441554645263e-001, -1.15681992548992e+000, 1.21569555000251e-001 },
 {9.02495658770069e-002, -2.67157661889002e+000, 3.79041621590611e+000, -2.67475877375101e+000, -1.59652418856948e+000, -1.07460086623659e+000, 1.76006082851904e+000 },
 {-3.74039848358957e-002, 5.68794073585407e-001, -8.60907739223251e-001, 5.76187034220722e-001, 1.21811283021526e-001, 7.00996053827873e-001, 3.69543382438823e-001 },
 {2.92255488960047e-001, -5.73929015005643e-001, 8.23896633512521e-001, -6.16682447429441e-001, 3.52282915760349e-001, -1.36721337917883e+000, -2.77201861085538e-001 },
 {1.39948120743875e-001, 5.39495333734844e-003, -1.71286964554128e-001, -5.74099097687145e-002, 1.22152538678851e-003, -4.15398612297002e-001, 4.35552022402581e-001 },
 {3.23591326822740e-002, 7.24356299081138e-001, -1.69899212973929e+000, 7.69069013802405e-001, 4.54679126724350e-001, -2.43899336453294e+000, 7.80468964386817e-001 },
 {4.13880447191094e-002, -1.65355221526402e-001, 1.12647600205499e+000, -2.11702581611049e-001, -4.78769610647225e-001, 5.34272272852483e-001, 4.84618161755938e-001 },
 {2.93409197012260e-001, -2.95194339545532e-001, 1.16501698208837e+000, -3.03042774004029e-001, 2.99410000663468e-001, 4.58876975391827e-002, -9.85864453022578e-002 },
 {-4.35190371425250e-001, 3.71490717206845e-003, 1.70729365081897e+000, 2.72374897898345e-002, -1.87265397224374e+000, 1.41295594502146e+000, -6.38516873923201e-001 },
 {3.94324983955787e-001, 2.34133719649597e-001, -1.18101643870763e+000, 2.83984531795326e-001, 5.40986481784145e-001, -2.37006300176278e+000, 1.54070978786415e+000 },
 {-3.11162550175598e-001, -7.54994147792203e-002, 9.66249167147856e-002, -3.93659269248420e-002, 3.91081725840559e-001, 4.41085048836236e-001, 7.38613510216722e-001 },
 {3.25783263916122e-001, -2.52296660641862e-001, 1.78321482887119e-001, -2.31709229470300e-001, -1.17928851058646e-001, -8.82331606932218e-001, 1.62172637231542e-001 },
 {-3.84627189648697e-002, -1.37915163428415e-001, 5.51692794552564e-001, -5.35377499363553e-002, -3.30570829768826e-001, 2.28125177662590e-001, -5.04320445873079e-001 },
 {4.12565979751588e-001, 3.63978153527456e-001, -1.68001721220231e+000, 3.52174901558482e-001, 7.83090245226534e-002, -2.31055466935271e+000, 6.38220176242446e-001 },
 {-1.54789916223341e-001, -4.07882002053508e-001, 1.05803488159896e+000, -3.86678302690235e-001, -1.91536695830603e-001, 1.83050486752405e+000, -8.58817546546015e-001 },
 {9.77807993987787e-002, -2.02552244993574e-001, -6.52985436408448e-001, -1.92536188773515e-001, 5.65821970910380e-001, -4.80103752053028e-001, 7.46903553261733e-001 },
 {3.60948821676521e-001, -6.47564284744058e-001, 2.00598073034027e+000, -6.11482184939615e-001, -3.76623423410566e-002, -2.25425844539008e-001, 1.61447221420590e-001 },
 {-1.45603641154730e-001, 4.05986972777531e-002, 1.69898611968258e-001, 5.37081666540264e-002, -2.88637936247838e-002, 6.02443615214334e-001, -1.07297725726719e-001 },
 {-1.06286791926114e-001, 1.56569070216118e-001, -4.74280879767532e-001, 1.26244615186202e-001, -2.93255211113878e-001, -6.04876816954841e-001, 3.31350699002880e-001 },
 {2.36539435085259e-001, -6.18319179632701e-001, 1.48725849118804e+000, -6.61820814648199e-001, 1.02289768437658e-001, -2.36516271477423e-001, -4.08458213587157e-001 },
 {1.29109097221285e+000, -2.21195629101389e-001, 2.20237655067033e+000, -2.70821005369399e-001, -1.58845274954600e+000, 2.73578934842409e+000, 1.33317808942201e+000 },
 {-8.24572662535771e-002, 5.50444905297036e-001, -1.09345678528354e+000, 5.72651017602298e-001, 4.09488211895378e-001, 8.50474526529507e-001, 5.93686444062189e-001 },
 {-1.49926045935914e-001, -3.46669920016250e-001, 1.43700498321291e+000, -3.95055445556747e-001, -1.04860337367668e-002, 1.05486111587755e+000, -6.67986190093683e-001 },
 {1.11132643455021e-001, -7.42098696678625e-001, 2.13234347723829e+000, -6.87200413738622e-001, -9.42480024926690e-002, -6.76244607610596e-001, 4.28983018266660e-001 },
 {-3.85058513052097e-002, 3.83166949351572e-001, -1.45956816343552e+000, 3.90004226362903e-001, 1.60669936397233e-001, -1.53541684428121e+000, 7.43942953238905e-001 },
 {1.33901174953791e-001, -2.82625523001378e-001, 3.06955486487742e-001, -2.75073696692768e-001, 1.66494172890793e-001, -6.00278795685424e-001, 5.15915093536822e-001 },
 {-3.29853535191348e-002, 4.19535839873526e-001, -1.07776896208921e+000, 3.84805256697507e-001, 1.14627633650072e-002, -1.47470097131960e+000, 6.17080526098028e-001 },
 {9.70077497792144e-001, 1.26056797529500e+000, -1.23981020087139e+000, 1.20829813003962e+000, -1.24549418788418e-001, -2.60544779651048e+000, 8.14831796659656e-001 },
 {3.52969820347564e-001, 1.41793082205705e+000, -1.99071637470549e+000, 1.42756396702769e+000, 7.68489870081883e-001, -1.91376387640277e+000, 5.15898654875546e-001 },
 {3.54845657675329e+000, 4.03368104350157e-001, 3.77887537639876e+000, 3.81917107020871e-001, -3.11233762392215e+000, -2.17399495550704e+000, 4.29596200811048e+000 },
 {1.16175459795931e-001, 5.23427826390145e-002, 6.55220014345667e-001, 4.84231300808768e-002, 3.18517484637200e-001, 8.17623148011040e-001, -2.19047141672112e-001 },
 {2.45694441400004e-001, -8.16939130324289e-001, 2.46846222549968e+000, -7.30220249297682e-001, -1.65345480403183e-001, -4.00099847843039e-001, 3.79890444236129e-001 },
 {2.84312444160860e-002, -3.97861441354645e-001, 6.86777079226851e-001, -4.20779376841305e-001, -1.96557590199432e-001, 1.21743254462243e-001, -6.17451292197853e-001 },
 {5.89071480679075e-001, 3.11597356077433e-001, -4.82070492188234e-001, 2.86551742559157e-001, 3.22953420031663e-001, -2.31505945715993e+000, 5.57527614584552e-001 },
 {5.00624901030653e-001, -3.64504017839409e-001, -6.95657127923687e-002, -3.13681764720471e-001, 2.34384990675924e-001, -1.39419765771731e+000, 4.11575786355099e-001 },
 {1.91056176731016e-002, -1.80267819550716e-001, 7.88353911956957e-001, -1.29658626814462e-001, 1.89133433199206e-002, 7.51497121373595e-001, -3.08315615415860e-001 },
 {9.75453133854609e-002, -9.83478233045219e-001, 2.20173713064948e+000, -9.91959523244885e-001, -8.78292081162771e-001, 2.32361015110475e+000, -5.37244300595234e-001 },
 {9.11609557279034e-002, -5.58859172773109e-003, -2.10560115816146e-001, -3.58722912061271e-003, -8.42370087932147e-002, -2.68482162682941e-001, 2.56013731911835e-001 },
 {2.96857636057514e-001, 3.39851715169864e-002, -3.46854884050401e-001, -2.94466861150528e-002, 3.18345415480622e-001, -1.66749919206136e+000, 9.47264020594479e-001 },
 {-3.79491040923640e-002, -3.38406333362893e-001, 2.14102240011445e-001, -3.74275420124095e-001, -7.67608665515926e-001, -7.44598745286779e-001, -5.89704045001931e-001 },
 {-3.20955925239140e-001, 4.04653152308053e-001, -3.28682836818817e-001, 4.14935019342737e-001, -2.96094617289515e-002, 1.47738015359498e+000, 7.68125311616578e-003 },
 {4.66740168059853e-001, 1.00049254969791e+000, -1.81490213173276e+000, 1.01082893397377e+000, 6.97035232555986e-001, -3.47488461104802e+000, 1.68093311260062e+000 },
 {-3.31977617846246e-001, -8.92335664207218e-001, 1.52042136184744e+000, -8.93017900606118e-001, -8.49850268671491e-001, 1.88211231830843e+000, -1.07900527939761e+000 },
 {-3.56477972598112e-001, -2.02731064457361e+000, 2.84443203717077e+000, -2.08919083590314e+000, -8.91500637091385e-001, 6.89358130008357e-001, -1.79031225318462e+000 },
 {2.29344634435095e-001, -1.54901130385012e-001, -3.45711858853823e-001, -1.28604215855791e-001, 6.79638620616830e-003, -5.89584723227329e-001, -6.24109788068501e-002 },
 {1.51941009014526e-001, -3.53514622664094e+000, 3.57966271415769e+000, -3.59840709581263e+000, -3.23315091527308e+000, 5.46481734015845e+000, 1.13606197624208e+000 },
 {-4.66577879158954e+000, 1.89782989329320e+000, -5.34406002957564e+000, 1.92809689012612e+000, -2.72817345180844e+000, 1.91045544728542e+001, -1.15299932343658e+000 } 
};

double hidden_bias[67]={ -2.06613193292224e-001, 4.90049860036101e-001, -1.15767772168653e+000, -1.10972840501934e+000, 5.29735992637642e-001, -9.50956049845840e-001, -6.92034758789130e-001, 7.72647958643597e-001, -6.56314047112679e-001, 8.54850459812499e-001, 4.05532928511358e-001, -7.37105613936775e-002, -5.46735598467281e-001, -4.00743857986568e-001, 2.80357504598105e-001, -3.42227432343854e-001, 5.87280231670812e-001, -5.85638759232835e-001, -7.81934303814457e-001, -4.52512130702146e-001, -1.01056838189155e+000, 2.04478070138756e+000, 5.29078434526507e-001, -3.26275721443803e-001, 1.81911357981756e-001, -2.83429465589434e-001, 2.10274466190249e-001, 8.08083366767584e-001, -2.51717899266314e+000, 6.49362367842400e-002, 8.89168690605973e-001, -1.62815198744631e-001, -7.80748038580838e-001, -2.11118361393668e-001, 4.46003334958580e-001, 1.54921882080723e+000, 6.86453985171110e-001, 3.97494952050951e-001, -2.85930246635811e-001, 2.44776138362277e-001, 8.61320781349208e-001, 1.10377133889653e+000, 4.96652275900032e-002, 1.28834432591933e+000, -6.54516351704883e-001, 5.89674834014250e-001, -4.35543921682099e-001, -1.39791958381259e+000, 7.90045724436140e-001, 1.21100340520162e+000, 5.00382011593931e-001, 9.44537647477858e-001, -5.34308369859427e-001, -9.92349047558679e-001, 9.00203080509992e-001, 4.33292996951079e-001, 8.64883402083948e-001, -3.89294834316878e-002, -6.55110747310462e-002, -1.25931682131269e+000, 4.86408688356837e-001, 2.17127736707034e-001, 7.72836381244529e-001, 5.29801757048265e-003, -4.31416138312765e-001, 7.72873397023195e-001, -4.13814788002487e+000 };

double hidden_output_wts[1][67]=
{
 {2.12027840564913e-001, 4.00684949699324e-001, 4.23093729359642e-001, -4.53867505880873e-001, 6.32330783176762e-001, 4.50723247985612e-001, -3.55437532647796e-001, 1.29832696345461e+000, 1.11859772886162e-001, -2.00764909529144e+000, -1.67840296102485e+000, 4.38401203022154e-001, 2.68174754830790e-001, -8.79956051467879e-001, 6.18326911170708e-001, -5.34306479388816e-001, 5.28828395444732e-001, -6.05555624806392e-001, -5.06394030293386e-002, -1.09167130540611e-001, -1.70059254507108e-001, -3.33228205013753e+000, 2.24955809239757e-002, 2.94076886310034e-002, -1.92331628431272e-001, -7.35603387371482e-001, -9.04908812807588e-001, -2.33602035002558e-001, 2.79241323377640e-001, -9.23182496061762e-001, -1.07395973570248e+000, -2.01224646417613e-001, 1.70149055603733e-001, -3.87116996610751e-001, 4.16997730521304e-001, -8.39487519813725e-001, -4.75382647021199e-001, -1.03805802614776e-001, -9.16735958499674e-002, -3.12351512978381e-001, -3.77923113953525e-001, -2.64000446414551e-001, 1.94014930527476e-001, -1.14616192580739e+000, -3.26796201283473e-001, -2.32171349159220e-001, -3.99052258579893e-001, -1.74832776689495e+000, 1.85173451227532e+000, 3.47613139876344e+000, 1.07447987714251e-001, -9.73678523026902e-001, 1.80284119026979e-001, -7.84170526731447e-001, -4.62216267766607e-002, -1.23509690466248e-001, 1.17143411672491e+000, -9.70985653612931e-002, -3.46571280406745e-001, 3.33075816710755e-001, 2.45777564202090e-001, -1.68450854933187e+000, 1.10129297196468e+000, -2.69965215004411e+000, 4.64008843951916e-002, 4.27895456623035e+000, -6.79920744864976e+000 }
};

double output_bias[1]={ 5.31648755142363e-001 };

double max_input[7]={ 6.43300000000000e-002, 5.64700000000000e-002, 7.94000000000000e-002, 1.69420000000000e-001, 3.30470000000000e+001, 8.50000000000000e+001, 1.00000000000000e+000 };

double min_input[7]={ 2.04000000000000e-003, 4.68000000000000e-003, 5.70000000000000e-003, 1.40300000000000e-002, 8.44100000000000e+000, 4.60000000000000e+001, 0.00000000000000e+000 };

double max_target[1]={ 1.00000000000000e+000 };

double min_target[1]={ 0.00000000000000e+000 };

double input[7];
double hidden[67];
double output[1];

void ScaleInputs(double* input, double minimum, double maximum, int size)
{
 double delta;
 long i;
 for(i=0; i<size; i++)
 {
	delta = (maximum-minimum)/(max_input[i]-min_input[i]);
	input[i] = minimum - delta*min_input[i]+ delta*input[i];
 }
}

void UnscaleTargets(double* output, double minimum, double maximum, int size)
{
  double delta;
  long i;
  for(i=0; i<size; i++)
  {
    delta = (maximum-minimum)/(max_target[i]-min_target[i]);
    output[i] = (output[i] - minimum + delta*min_target[i])/delta;
   }
}

void ComputeFeedForwardSignals(double* MAT_INOUT,double* V_IN,double* V_OUT, double* V_BIAS,int size1,int size2,int layer)
{
  int row,col;
  for(row=0;row < size2; row++) 
    {
      V_OUT[row]=0.0;
      for(col=0;col<size1;col++)V_OUT[row]+=(*(MAT_INOUT+(row*size1)+col)*V_IN[col]);
      V_OUT[row]+=V_BIAS[row];
      if(layer==0) V_OUT[row] = tanh(V_OUT[row]);
      if(layer==1) V_OUT[row] = tanh(V_OUT[row]);
   }
}

void RunNeuralNet_Regression () 
{
  ComputeFeedForwardSignals((double*)input_hidden_weights,input,hidden,hidden_bias,7, 67,0);
  ComputeFeedForwardSignals((double*)hidden_output_wts,hidden,output,output_bias,67, 1,1);
}

int main(int argc, char *argv[])
{
    if(argc == 8){
        input[0] = atof(argv[1]);
    	input[1] = atof(argv[2]);
    	input[2] = atof(argv[3]);
    	input[3] = atof(argv[4]);
    	input[4] = atof(argv[5]);
    	input[5] = atof(argv[6]);
    	input[6] = atof(argv[7]);
        ScaleInputs(input,0,1,7);
    	RunNeuralNet_Regression();
    	UnscaleTargets(output,0,1,1);
    	printf("PredictedState=%lf",output[0]);
        return 0;
     }else{
         printf("Not given enough arguments");
         return -1;
    }
}

